# 📈 Trading Backtest System

트레이딩 전략을 백테스트하고 성과를 분석하는 웹 애플리케이션입니다.

## 🌐 Live Demo
**https://backtesting-flux.up.railway.app/**

지금 바로 실행 중인 애플리케이션을 확인하세요!

## 🎯 지원 전략

### 💎 Buy and Hold (매수 후 보유)
**가장 기본적인 투자 전략으로, 다른 전략들의 성과를 비교하는 기준선(벤치마크)입니다.**

- **전략 설명**: 처음에 주식을 사서 계속 보유만 하는 방식입니다. 아무 것도 하지 않고 그냥 들고만 있는 것이죠.
- **언제 매수**: 백테스트 시작 첫날에 전액 매수
- **언제 매도**: 매도하지 않음 (끝까지 보유)
- **장점**: 가장 단순하고, 장기적으로 시장이 상승하면 수익 발생
- **단점**: 하락장에서도 계속 보유하므로 손실이 클 수 있음
- **이런 분께 추천**: 장기 투자자, 시장 타이밍을 잡기 어려운 초보 투자자

### 🌟 Golden Cross (골든크로스)
**단기 이동평균선이 장기 이동평균선을 뚫고 올라갈 때 매수하는 추세 추종 전략입니다.**

- **전략 설명**:
  - 이동평균선이란? 일정 기간 동안의 평균 가격을 이은 선입니다. 예를 들어 20일 이동평균선은 최근 20일간의 평균 가격입니다.
  - 단기 이평선(예: 20일)이 장기 이평선(예: 60일)을 아래에서 위로 뚫고 올라가면 **골든크로스** → 매수 신호
  - 단기 이평선이 장기 이평선 아래로 떨어지면 **데드크로스** → 매도 신호
- **언제 매수**: 단기 이평선 > 장기 이평선 (상승 추세 시작)
- **언제 매도**: 단기 이평선 < 장기 이평선 (하락 추세 시작)
- **장점**: 큰 상승 추세를 잡아낼 수 있음, 이해하기 쉬움
- **단점**: 횡보장(옆으로 움직이는 장)에서 잦은 거래로 손실 가능
- **이런 분께 추천**: 추세를 따라가고 싶은 투자자, 큰 상승장을 놓치고 싶지 않은 분

### 📊 RSI (상대강도지수)
**과매수/과매도 구간을 찾아서 역발상으로 거래하는 전략입니다.**

- **전략 설명**:
  - RSI는 0~100 사이의 값으로, 주가가 얼마나 과열되었는지 또는 침체되었는지를 나타냅니다.
  - RSI가 70 이상이면 **과매수** (너무 많이 올라서 조정 가능성) → 매도 신호
  - RSI가 30 이하면 **과매도** (너무 많이 떨어져서 반등 가능성) → 매수 신호
- **언제 매수**: RSI < 30 (주가가 너무 떨어졌을 때)
- **언제 매도**: RSI > 70 (주가가 너무 올랐을 때)
- **장점**: 단기적인 반등을 잡기 좋음, 박스권 장세에 유리
- **단점**: 강한 추세장에서는 오랫동안 과매수/과매도 구간에 머물 수 있음
- **이런 분께 추천**: 단타/스윙 트레이더, 박스권에서 거래하고 싶은 분

### 📉 Bollinger Bands (볼린저 밴드)
**가격이 통계적 범위를 벗어났을 때 평균으로 돌아올 것을 기대하는 전략입니다.**

- **전략 설명**:
  - 볼린저 밴드는 이동평균선을 중심으로 위아래로 표준편차만큼 그린 밴드입니다.
  - **상단 밴드**: 통계적으로 높은 가격 (평균 + 2 표준편차)
  - **중간 밴드**: 이동평균선 (평균 가격)
  - **하단 밴드**: 통계적으로 낮은 가격 (평균 - 2 표준편차)
  - 가격이 하단 밴드에 닿으면 → 매수 신호 (너무 싸다, 곧 올라올 것)
  - 가격이 상단 밴드에 닿으면 → 매도 신호 (너무 비싸다, 곧 내려올 것)
- **언제 매수**: 가격 ≤ 하단 밴드
- **언제 매도**: 가격 ≥ 상단 밴드
- **장점**: 변동성을 고려하여 매매, 평균 회귀 전략에 강함
- **단점**: 강한 추세장에서는 밴드를 벗어나 계속 움직일 수 있음
- **이런 분께 추천**: 통계적 접근을 선호하는 투자자, 박스권 매매를 좋아하는 분

### 📈 MACD (이동평균 수렴확산)
**두 이동평균선의 차이를 이용해 모멘텀(추진력)을 파악하는 전략입니다.**

- **전략 설명**:
  - MACD는 단기 이평선(12일)과 장기 이평선(26일)의 차이입니다.
  - MACD 값이 신호선(9일 이평선)을 위로 뚫으면 → 매수 신호 (상승 모멘텀 강화)
  - MACD 값이 신호선 아래로 떨어지면 → 매도 신호 (하락 모멘텀 강화)
  - 쉽게 말하면, 주가의 "기세"를 측정하는 지표입니다.
- **언제 매수**: MACD 선 > Signal 선 (상승 기세 시작)
- **언제 매도**: MACD 선 < Signal 선 (하락 기세 시작)
- **장점**: 추세 전환을 빠르게 포착, 골든크로스보다 민감
- **단점**: 횡보장에서 잦은 신호로 손실 가능
- **이런 분께 추천**: 모멘텀 투자를 좋아하는 분, 빠른 추세 전환을 잡고 싶은 트레이더

## 🤔 어떤 전략을 선택해야 할까요?

- **장기 투자자** → Buy and Hold
- **상승 추세를 타고 싶다** → Golden Cross 또는 MACD
- **단기 매매, 박스권 장세** → RSI 또는 Bollinger Bands
- **초보자** → Buy and Hold (가장 단순) 또는 Golden Cross (이해하기 쉬움)

💡 **팁**: 여러 전략을 백테스트해보고 성과를 비교해보세요! 각 전략의 수익률, MDD, 샤프 지수를 확인하여 자신에게 맞는 전략을 찾으세요.

## 🎯 주요 기능

- **5가지 트레이딩 전략** (위 참조)

- **실시간 데이터**
  - Yahoo Finance API를 통한 무료 실시간 주식 데이터
  - 다양한 시간 간격 지원 (1분봉 ~ 일봉)

- **성과 분석**
  - 누적 수익률, CAGR, MDD, Sharpe Ratio
  - 승률, 거래 횟수
  - 인터랙티브 차트 (Plotly)
  - Excel 다운로드

## 🚀 로컬 실행

### 1. 저장소 클론
```bash
git clone <repository-url>
cd TradingBackTester
```

### 2. 가상환경 생성 및 활성화
```bash
cd app
python3 -m venv venv
source venv/bin/activate  # Mac/Linux
# venv\Scripts\activate  # Windows
```

### 3. 패키지 설치
```bash
pip install -r requirements.txt
```

### 4. 앱 실행
```bash
cd ui
streamlit run app.py
```

브라우저에서 http://localhost:8501 접속

## 📁 프로젝트 구조

```
TradingBackTester/
├── app/
│   ├── core/                # 핵심 로직
│   │   ├── data_loader.py   # 데이터 로딩
│   │   ├── backtest_engine.py  # 백테스트 엔진
│   │   └── performance.py   # 성과 분석
│   ├── strategies/          # 전략 구현
│   │   ├── base.py          # 추상 베이스 클래스
│   │   ├── factory.py       # 전략 팩토리
│   │   ├── buy_and_hold.py
│   │   ├── golden_cross.py
│   │   ├── rsi.py
│   │   ├── bollinger.py
│   │   └── macd.py
│   └── ui/
│       └── app.py           # Streamlit UI
├── requirements.txt
└── README.md
```

## 🎨 사용 방법

1. **전략 선택**: 사이드바에서 원하는 전략 선택
2. **파라미터 설정**:
   - 종목 심볼 (예: TSLA, AAPL)
   - 시작일/종료일
   - 초기 자본
   - 거래 단위
   - 봉 간격
   - 전략별 파라미터
3. **백테스트 실행**: "백테스트 실행" 버튼 클릭
4. **결과 확인**:
   - 성과 지표
   - 가격 차트 & 매매 신호
   - 누적 수익률 차트
   - 시계열 데이터 테이블
5. **Excel 다운로드**: 결과를 Excel 파일로 다운로드

## 🏗️ 아키텍처

이 프로젝트는 **Strategy Pattern**을 사용하여 설계되었습니다:

- `TradingStrategy` (추상 베이스 클래스): 모든 전략의 인터페이스 정의
- `StrategyFactory`: 전략 인스턴스 생성 및 관리
- `BacktestEngine`: 전략 독립적인 백테스트 실행
- `PerformanceAnalyzer`: 성과 지표 계산

새로운 전략 추가가 용이하고 기존 코드 수정 없이 확장 가능합니다.

## 📊 성과 지표

- **누적 수익률**: 총 수익률
- **CAGR**: 연평균 복리 수익률
- **MDD**: 최대 낙폭
- **Sharpe Ratio**: 위험 대비 수익률
- **승률**: 수익 거래 비율
- **총 거래 횟수**: 매수/매도 쌍의 개수

## 🛠️ 기술 스택

- **Python 3.9+**
- **Streamlit**: 웹 UI 프레임워크
- **pandas**: 데이터 처리
- **yfinance**: 주식 데이터
- **plotly**: 인터랙티브 차트
- **openpyxl**: Excel 파일 생성

## 📝 라이선스

MIT License

## 🚀 배포

이 프로젝트는 Railway에 배포되어 있습니다.

- **Production URL**: https://backtesting-flux.up.railway.app/
- **GitHub Repository**: https://github.com/jeromwolf/Backtesting
- **자동 배포**: GitHub main 브랜치에 push하면 자동으로 재배포됩니다

### Railway 배포 설정
- `Procfile`: 실행 명령어 정의
- `railway.toml`: Railway 설정
- `runtime.txt`: Python 버전 지정

## 📝 개발 노트

자세한 개발 컨텍스트 및 히스토리는 `claude.md` 파일을 참조하세요.

## 🔮 다음 버전 (v2.0) 계획

- 다중 전략 동시 비교
- 포트폴리오 백테스트
- 파라미터 최적화 (Grid Search)
- 거래 수수료 및 슬리피지 반영
- 추가 기술적 지표

## 👥 Contributors

- **Kelly** (jeromwolf) - Project Owner & Developer
- **Claude Code** - AI Pair Programming Assistant
